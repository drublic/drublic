!function(f,e,b,h){var a=function(){if(f(e).width()<481){return true}else{return false}};!function(){if(a()){var i,k,j=f("<ul />",{"class":"menu",html:j});f("#main").find("section").each(function(l){i=f(this);k=i.find("h2 a").html();sectionClass=i.attr("class");f("<li />",{id:"menu-li-"+l,html:'<a href="#!/'+sectionClass+'">'+k+"</a>"}).appendTo(j)});j.prependTo("#main");f("<span />",{"class":"scroll-next",html:"&darr;"}).insertAfter(f("#main").find("section").not(":last-child").find("h2")).click(function(){log(f(this).closest("section").next().offset().top);f("html,body").animate({scrollTop:f(this).closest("section").next().offset().top})});f("<span />",{"class":"scroll-top",html:"&uarr;"}).insertAfter(f("#main").find("section").last().find("h2")).click(function(){f("html,body").animate({scrollTop:0})});f(".projects").find("li").click(function(){f(this).find(".back").animat({opacity:"toggle"})})}}();function d(j){j=new Date(j);var i=j.getDate()+"."+parseInt(j.getMonth()+1)+"."+j.getFullYear();i+=" - "+j.getHours()+":"+((j.getMinutes()<=9)?"0"+j.getMinutes():j.getMinutes());return i}f.get("http://blog.pagetimer.de/api/read/json?num=15&filter=text",function(j){log(j);f(".pagetimer .feed ul").html("");var i="";f.each(j.posts,function(k,l){i=l["regular-body"].substr(0,100);f(".pagetimer .feed ul").append('<li style="display: none;"><h4><a href="'+l["url-with-slug"]+'" target="_blank">'+l["regular-title"]+"</a></h4><span>"+twttr.txt.autoLink(i)+' <a href="'+l["url-with-slug"]+'" target="_blank">read more&hellip;</a><a href="'+l["url-with-slug"]+'" target="_blank" class="date">'+d(l.date)+"</a></li>");f(".pagetimer .feed ul").find("li:last").delay(k*100).animate({opacity:"toggle"})})},"jsonp");f.get("http://www.twitter.com/status/user_timeline/drublic.json?count=10",function(i){log(i);f(".twitter .feed ul").html("");f.each(i,function(j,k){f(".twitter .feed ul").append('<li style="display: none;">'+twttr.txt.autoLink(k.text)+' <a href="http://twitter.com/drublic/status/'+k.id+'" target="_blank" class="date">'+d(k.created_at)+"</a></li>");f(".twitter .feed ul").find("li:last").delay(j*100).animate({opacity:"toggle"})})},"jsonp");f.get("http://drublic.tumblr.com/api/read/json?num=5&filter=text",function(k){log(k);f(".tumblr .feed ul").html("");var i="",j="";f.each(k.posts,function(m,n){j+='<li style="display: none;">';if(n["regular-body"]!==h){j+='<h4><a href="'+n["url-with-slug"]+'" target="_blank">'+n["regular-title"]+"</a></h4>";i=n["regular-body"].substr(0,100);j+="<span>"+twttr.txt.autoLink(i)+' <a href="'+n["url-with-slug"]+'" target="_blank">read more&hellip;</a>'}else{if(n["photo-url-500"]!==h){var l=n["photo-url-250"];if(f(".tumblr .feed").width()>300){l=n["photo-url-500"]}j+='<a href="'+n["photo-url-500"]+'" rel="group_tumblr" title="'+n["photo-caption"]+'" class="fancybox" target="_black"><img src="'+l+'" alt=""></a>'}else{return}}j+='<a href="'+n["url-with-slug"]+'" target="_blank" class="date">'+d(n.date)+"</a></li>"});f(".tumblr .feed ul").append(j);if(!a()){f(".tumblr .fancybox").fancybox({overlayShow:false})}else{f(".tumblr .fancybox").click(function(l){l.preventDefault()})}f(".tumblr .feed li").each(function(l){f(this).delay(l*100).animate({opacity:"toggle"})})},"jsonp");!function(){if(a()){return}var j=0;!function k(){if(j<f("#main").find("section").size()){if(!f("#main").find("section").eq(j).hasClass("imprint")){f("#main").find("section").eq(j).height(f("html").height()-f("#main").offset().top)}j++;k()}}()}();!function(){f(".contact").find("form").attr("action","#!/"+f(".contact").find("form").attr("action")).submit(function(i){i.preventDefault();var j={};f(this).find("input, textarea").each(function(){f(this).removeClass("invalid");if(f(this).val()!=""){j[f(this).attr("name")]=f(this).val()}else{j[f(this).attr("name")]=f(this).val();f(this).addClass("invalid")}});f.post("ajax/send.php",j,function(k){log(k);if(k.error===h){f("body").append('<div class="message">'+k.msg+"</div>");f(".contact").find("form").find("input, textarea").each(function(){f(this).removeClass("invalid").attr("disabled",true);
if(f(this).attr("type")!=="submit"){f(this).val("")}})}else{f("body").append('<div class="message">An error occured! Please resolve it!</div>')}setTimeout(function(){if(f(".message").size()>0){f(".message").fadeOut(function(){f(this).remove()})}},5000)},"json")})}();var g="";f("nav").find("li:first-child").addClass("active");!function c(n){if(n!==e.location.hash){n=e.location.hash;f("nav").find(".active").removeClass("active");f("nav").find('a[href$="'+n.split(/\#\!\//)[1]+'"]').parent().addClass("active");if(n==="#!/home"){f(".imprint, .contact").fadeOut(function(){var o=0;!function p(){if(o<f("#main").find("section").size()){f("#main").find("section").eq(o).show().animate({top:0});o++;setTimeout(p,100)}}();if(a()){f(".menu").fadeIn()}})}else{if(n==="#!/imprint"){var k=0;f(".contact").fadeOut();!function m(){if(k<f("#main").find("section").size()){f("#main").find("section").eq(k).animate({top:f("#main").height()},function(){f(this).fadeOut()});k++;setTimeout(m,100)}else{f(".imprint").delay(500).fadeIn()}}();if(a()){f(".menu").fadeOut()}}else{if(n==="#!/contact"){var k=0;f(".imprint").fadeOut();!function m(){if(k<f("#main").find("section").size()){f("#main").find("section").eq(k).animate({top:f("#main").height()},function(){f(this).fadeOut()});k++;setTimeout(m,100)}else{f(".contact").delay(500).fadeIn()}}();if(a()){f(".menu").fadeOut()}}else{var l="."+n.split(/\#\!\//)[1];if(f(l).size()>0){f("html, body").animate({scrollTop:f(l).offset().top})}f("nav").find("li:first-child").addClass("active")}}}if(a()){var j=f("nav .active").clone();f("nav .active").remove();f("nav li").eq(0).after(j)}}setTimeout(function(){c(n)},100)}(g)}(jQuery,window,document);