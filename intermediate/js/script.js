!function(e,f,g,b){var h=function(){if(e(f).width()<481){return true}else{return false}};!function(){var k,j;e("nav a").each(function(){k=e(this);if(k.attr("target")!="_blank"){j=k.attr("href").replace(e("#head").find("a").attr("href"),"");k.attr("href","#!/"+j)}})}();function a(){if(h()){var j,l,k=e("<ul />",{"class":"menu",html:k});e("#main").find("section").each(function(m){j=e(this);l=j.find("h2 a").html();sectionClass=j.attr("class");e("<li />",{id:"menu-li-"+m,html:'<a href="#!/'+sectionClass+'">'+l+"</a>"}).appendTo(k)});k.prependTo("#main");e("<span />",{"class":"scroll-next",html:"&darr;"}).insertAfter(e("#main").find("section").not(":last-child").find("h2")).click(function(){log(e(this).closest("section").next().offset().top);e("html,body").animate({scrollTop:e(this).closest("section").next().offset().top})});e("<span />",{"class":"scroll-top",html:"&uarr;"}).insertAfter(e("#main").find("section").last().find("h2")).click(function(){e("html,body").animate({scrollTop:0})});e(".projects").find("li").click(function(){e(this).find(".back").animat({opacity:"toggle"})})}}a();function c(k){k=new Date(k);var j="";j+=(parseInt(k.getDate())<=9)?"0"+k.getDate():k.getDate();j+=".";j+=((parseInt(k.getMonth())+1)<=9)?"0"+(parseInt(k.getMonth())+1):(parseInt(k.getMonth())+1);j+=".";j+=k.getFullYear();j+=" - ";j+=k.getHours()+":"+((k.getMinutes()<=9)?"0"+k.getMinutes():k.getMinutes());return j}e.get("http://blog.pagetimer.de/api/read/json?num=15&filter=text",function(k){log("Pagetimer-Blog",k);e(".pagetimer .feed ul").html("");var j="";e.each(k.posts,function(l,m){j=m["regular-body"].substr(0,100);e(".pagetimer .feed ul").append('<li style="display: none;"><h4><a href="'+m["url-with-slug"]+'" target="_blank">'+m["regular-title"]+"</a></h4><span>"+twttr.txt.autoLink(j)+' <a href="'+m["url-with-slug"]+'" target="_blank">read more&hellip;</a><a href="'+m["url-with-slug"]+'" target="_blank" class="date">'+c(m.date)+"</a></li>");e(".pagetimer .feed ul").find("li:last").delay(l*100).animate({opacity:"toggle"})})},"jsonp");e.get("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=drublic&count=10&include_rts=1",function(j){log(j);e(".twitter .feed ul").html("");e.each(j,function(k,l){e(".twitter .feed ul").append('<li style="display: none;">'+twttr.txt.autoLink(l.text)+' <a href="http://twitter.com/drublic/status/'+l.id_str+'" target="_blank" class="date">'+c(l.created_at)+"</a></li>");e(".twitter .feed ul").find("li:last").delay(k*100).animate({opacity:"toggle"})})},"jsonp");e.get("http://drublic.tumblr.com/api/read/json?num=5&filter=text",function(l){log(l);e(".tumblr .feed ul").html("");var j="",k="";e.each(l.posts,function(n,o){k+='<li style="display: none;">';if(o["regular-body"]!==b){k+='<h4><a href="'+o["url-with-slug"]+'" target="_blank">'+o["regular-title"]+"</a></h4>";j=o["regular-body"].substr(0,100);k+="<span>"+twttr.txt.autoLink(j)+' <a href="'+o["url-with-slug"]+'" target="_blank">read more&hellip;</a>'}else{if(o["photo-url-500"]!==b){var m=o["photo-url-250"];if(e(".tumblr .feed").width()>250){m=o["photo-url-500"]}k+='<a href="'+o["photo-url-500"]+'" rel="group_tumblr" title="'+o["photo-caption"]+'" class="fancybox" target="_black"><img src="'+m+'" alt="'+o["photo-caption"]+'" style="opacity: 0;"></a>'}else{if(o.type==="video"){k+=o["video-player"]}else{return}}}k+='<a href="'+o["url-with-slug"]+'" target="_blank" class="date">'+c(o.date)+"</a></li>"});e(".tumblr .feed ul").append(k);e(".tumblr .feed img").load(function(){e(this).animate({opacity:"1"})});if(!h()){e(".tumblr .fancybox").fancybox()}else{e(".tumblr .fancybox").click(function(m){m.preventDefault()})}e(".tumblr .feed li").each(function(m){e(this).delay(m*100).animate({opacity:"toggle"})})},"jsonp");if(!h()){e(".projects .front").fancybox({width:400,height:"auto",autoScale:false,autoDimensions:false})}else{e(".projects .front").fancybox()}!function(){e(".contact").find("form").attr("action","#!/"+e(".contact").find("form").attr("action")).submit(function(j){j.preventDefault();
var k={};e(this).find("input, textarea").each(function(){e(this).removeClass("invalid");if(e(this).val()!=""){k[e(this).attr("name")]=e(this).val()}else{k[e(this).attr("name")]=e(this).val();e(this).addClass("invalid")}});e.post("ajax/send.php",k,function(l){log(l);if(l.error===b){e("body").append('<div class="message">'+l.msg+"</div>");e(".contact").find("form").find("input, textarea").each(function(){e(this).removeClass("invalid").attr("disabled",true);if(e(this).attr("type")!=="submit"){e(this).val("")}})}else{e("body").append('<div class="message">An error occured! Please resolve it!</div>')}setTimeout(function(){if(e(".message").size()>0){e(".message").fadeOut(function(){e(this).remove()})}},5000)},"json")})}();var d="";e("nav").find("li:first-child").addClass("active");!function i(n){if(n!==f.location.hash){n=f.location.hash;e("nav").find(".active").removeClass("active");e("nav").find('a[href$="'+n.split(/\#\!\//)[1]+'"]').parent().addClass("active");if(n==="#!/home"){e(".imprint, .contact").fadeOut(function(){var o=0;!function p(){if(o<e("#main").find("section").size()){e("#main").find("section").eq(o).show().animate({top:0});o++;setTimeout(p,100)}}();if(h()){e(".menu").fadeIn()}})}else{if(n==="#!/imprint"){var k=0;e(".contact").fadeOut();!function m(){if(k<e("#main").find("section").size()){e("#main").find("section").eq(k).animate({top:e("#main").height()},function(){e(this).fadeOut()});k++;setTimeout(m,100)}else{e(".imprint").delay(500).fadeIn()}}();if(h()){e(".menu").fadeOut()}}else{if(n==="#!/contact"){var k=0;e(".imprint").fadeOut();!function m(){if(k<e("#main").find("section").size()){e("#main").find("section").eq(k).animate({top:e("#main").height()},function(){e(this).fadeOut()});k++;setTimeout(m,100)}else{e(".contact").delay(500).fadeIn()}}();if(h()){e(".menu").fadeOut()}}else{var l="."+n.split(/\#\!\//)[1];if(e(l).size()>0){e("html, body").animate({scrollTop:e(l).offset().top})}e("nav").find("li:first-child").addClass("active")}}}if(h()){var j=e("nav .active").clone();e("nav .active").remove();e("nav li").eq(0).after(j)}}setTimeout(function(){i(n)},100)}(d);e(f).resize(function(){if(!h()){if(e(".menu").size()>0){e(".menu, .scroll-next, .scroll-top").remove()}}else{if(e(".menu").size()<1){a()}}})}(jQuery,window,document);