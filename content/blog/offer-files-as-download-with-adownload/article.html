<article class="post">
	<header class="post-header">
		<h1><a href="http://drublic.de/blog/offer-files-as-download-with-adownload/" title="Permalink to HTML5 a@download - Download Files directly in your Browser" rel="entry-title">HTML5 a@download - Download Files directly in your Browser</a></h1>
		<time datetime="Sun Aug 28 2011 02:00:00 GMT+0200 (CEST)" rel="updated">Sun Aug 28 2011 02:00:00 GMT+0200 (CEST)</time>

		<span class="author">
			by
			<a href="" title="Visit website" rel="author">Hans Christian</a>
		</span>

		<span class="categories">HTML5, Research</span>
		<span class="tags">Download, HTML5, Links, Specification</span>
	</header>

	<pre><code><div class="highlight"><pre>                <span class="o">&lt;</span><span class="nx">figure</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;aligncenter&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">width</span><span class="o">=</span><span class="s2">&quot;600&quot;</span> <span class="nx">height</span><span class="o">=</span><span class="s2">&quot;240&quot;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://drublic.de/blog/wp-content/uploads/2011/08/blog-a@download.jpg&quot;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;attachment-medium wp-post-image&quot;</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&quot;blog-a@download&quot;</span> <span class="o">/&gt;</span>            <span class="o">&lt;</span><span class="err">/figure&gt;</span>

                        <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;message&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Hey</span> <span class="nx">there</span><span class="err">…</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">post</span> <span class="nx">is</span> <span class="mi">668</span> <span class="nx">days</span> <span class="nx">old</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">was</span> <span class="nx">written</span> <span class="nx">on</span> <span class="mf">28.08</span><span class="p">.</span><span class="mi">2011</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">careful</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">information</span> <span class="nx">provided</span> <span class="nx">and</span> <span class="nx">check</span> <span class="nx">a</span> <span class="nx">more</span> <span class="nx">recent</span> <span class="nx">source</span> <span class="nx">on</span> <span class="k">this</span> <span class="nx">topic</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>

    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">So</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">title</span><span class="o">=</span><span class="s2">&quot;a@download in the spec&quot;</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#downloading-resources&quot;</span> <span class="nx">target</span><span class="o">=</span><span class="s2">&quot;_blank&quot;</span><span class="o">&gt;</span><span class="nx">the</span> <span class="nx">spec</span> <span class="nx">introduces</span><span class="o">&lt;</span><span class="err">/a&gt; a new attribute on &lt;code&gt;a&lt;/code&gt;-tags (so called “links” – this may be new to you ;-)) called &lt;code&gt;download&lt;/code&gt; (short: a@download – this technique of connecting attributes with tags is &lt;a title=&quot;HTML element + attribute notation&quot; href=&quot;http://mathiasbynens.be/notes/element-attribute-notation&quot; target=&quot;_blank&quot;&gt;written up and documented by Mathias Bynens&lt;/a&gt;).&lt;/p&gt;</span>
</pre></div>
</code></pre>
<p>When you link to a file like&nbsp;<a title="An image displayed in a browser window" href="http://drublic.de/blog/wp-content/uploads/2011/08/blog-a@download.jpg" target="_blank">an image</a>&nbsp;or&nbsp;<a title="A PDF-document that opens within the browser" href="http://www.git-tower.com/files/cheatsheet/Git_Cheat_Sheet_grey.pdf" target="_blank">a PDF-document</a>&nbsp;it will be displayed within the browser normally. The <code>download</code>-attribute in links prevents this behavior and offers the file as a download in your browser.</p>
<h2>Definition</h2>
<p>The spec allows the attribute for having a value. This value can be a string which defines the name of the downloaded file. As a default the browser takes the file’s original name.</p>
<p>And this is what it could look like in HTML:</p>

<div class="wp_syntax"><div class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;a</span> <span style="color: #000066;">href</span>=<span style="color: #ff0000;">&quot;path/to/file/file.png&quot;</span> <span style="color: #000066;">download</span>=<span style="color: #ff0000;">&quot;a-nice-image.png&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>Download this file<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/a<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></div></div>

<p>The value of the <code>download</code>-attribute overwrites the filename with <code>a-nice-image.png</code>.</p>
<p>The <code>Content-Disposition</code>-header can overwrite the name for the file.</p>
<p><a title="a@download demo" href="http://html5-demos.appspot.com/static/a.download.html" target="_blank">This really nice demo</a>&nbsp;exports a written text and offers it as download (but be aware of browser-support – see below).</p>
<h2>Browsersupport</h2>
<p>The download-attribute is not supported very good at the moment of writing this article.<br />
Chrome supports it since its version 14. Version 14 is only a view weeks away from the stable release.<br />
Firefox 8alpha (Aurora-channel) does not support it as far as I experienced it. I did not find anything about any intensions when Mozilla will include it.<br />
And the other ones? No support yet!</p>
<h2>So, what’s the fallback?</h2>
<p>There are other techniques to serve a file that will be offered as a downloads in the browser. For instance you can use an HTTP-Header that’s a mime-type that the browser does not know.</p>
<p>Here is an example with PHP:</p>

<div class="wp_syntax"><div class="code"><pre class="php" style="font-family: monospace;"><span style="color: #990000;">header</span><span style="color: #009900;">(</span><span style="color: #0000ff;">&#39;Content-Type:&nbsp;application/force-download&#39;</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
<span style="color: #990000;">header</span><span style="color: #009900;">(</span><span style="color: #0000ff;">&#39;Content-Disposition:&nbsp;attachment;&nbsp;filename=&quot;some-file-name.ext&quot;&#39;</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span></pre></div></div>

<p><p>You should then open the download in a new window or tab, or in an iframe to prevent any stupid browser-behavior.</p></p>
<p><p>More about this issue here.</p></p>
<ul>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#downloading-resources" target="_blank">The specification</a></li>
<li><a href="http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download" target="_blank">HTML5 Rocks</a></li>
</ul>





	<div class="share-post">
		<script type="text/x-handlebars-template" id="share-post">
			<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://drublic.de/blog/offer-files-as-download-with-adownload/" data-text="HTML5 a@download - Download Files directly in your Browser" data-count="horizontal" data-via="drublic" data-related="drublic">Tweet</a>

			<g:plusone size="medium"></g:plusone>
		</script>
	</div>
</article>
