<article class="post">
	<header class="post-header">
		<h1><a href="http://drublic.de/blog/style-syntax-in-comments/" title="Permalink to Add Style-Syntax in Comments with `, _ and *" rel="entry-title">Add Style-Syntax in Comments with `, _ and *</a></h1>
		<time datetime="Sun Sep 04 2011 02:00:00 GMT+0200 (CEST)" rel="updated">Sun Sep 04 2011 02:00:00 GMT+0200 (CEST)</time>

		<span class="author">
			by
			<a href="" title="Visit website" rel="author">Hans Christian</a>
		</span>

		<span class="categories">WordPress</span>
		<span class="tags">Comments, Markup, PHP, Wordpress</span>
	</header>

	<pre><code><div class="highlight"><pre>                        <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;message&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Hey</span> <span class="nx">there</span><span class="err">…</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">post</span> <span class="nx">is</span> <span class="mi">661</span> <span class="nx">days</span> <span class="nx">old</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">was</span> <span class="nx">written</span> <span class="nx">on</span> <span class="mf">04.09</span><span class="p">.</span><span class="mi">2011</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">careful</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">information</span> <span class="nx">provided</span> <span class="nx">and</span> <span class="nx">check</span> <span class="nx">a</span> <span class="nx">more</span> <span class="nx">recent</span> <span class="nx">source</span> <span class="nx">on</span> <span class="k">this</span> <span class="nx">topic</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>

    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">may</span> <span class="nx">be</span> <span class="nx">familiar</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">syntax</span> <span class="nx">of</span> <span class="nx">writing</span> <span class="o">&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nx">code</span><span class="o">&lt;</span><span class="err">/code&gt;-Tags like `some code here`. This is what is used by Github for example.&lt;/p&gt;</span>
</pre></div>
</code></pre>
<p>At Daring Fireball they <a title="Markdown: Syntax" href="http://daringfireball.net/projects/markdown/syntax" target="_blank">wrote up</a> the syntax. Not only for code-Tags but for various features that are connected to style and semantics.</p>
<p>In the comments of this blog it is possible to use some of the rules to add some markup to them.</p>
<p>For instance when you write:</p>

<div class="wp_syntax"><div class="code"><pre class="xml" style="font-family: monospace;">Some fancy text with <strong>styled <em>markup</em></strong> and <code>code</code>.</pre></div></div>

<p>It will be transfered to</p>

<div class="wp_syntax"><div class="code"><pre class="xml" style="font-family: monospace;">Some fancy text with <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;strong<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>styled <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;em<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>markup<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/em<span style="color: #000000; font-weight: bold;">&gt;</span></span><span style="color: #000000; font-weight: bold;">&lt;/strong<span style="color: #000000; font-weight: bold;">&gt;</span></span></span> and <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;code<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>code<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/code<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>.</pre></div></div>

<p>I really like to use these tags in comments to style them a little bit.</p>
<h2>Use in your own intallation</h2>
<p>So if you want to use them in your own WordPress-installation check the following function – paste it in your <code>functions.php</code>:</p>

<div class="wp_syntax"><div class="code"><pre class="php" style="font-family: monospace;"><span style="color: #000000; font-weight: bold;">function</span> my<em>preprocess<em>comment<span style="color: #009900;">(</span> <span style="color: #000088;">$comment</span> <span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
  <span style="color: #666666; font-style: italic;">// Replace all appereances of <strong> and ** with &lt;b&gt; and &lt;strong&gt;</span>
  <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #990000;">preg_replace</span><span style="color: #009900;">(</span> <span style="color: #0000ff;">&#39;/</strong>(.*?)_</em>/is&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;&lt;b&gt;$1&lt;/b&gt;&#39;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #009900;">)</span><span style="color: #339933;">;</span>
  <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #990000;">preg_replace</span><span style="color: #009900;">(</span> <span style="color: #0000ff;">&#39;/**(.<em>?)\</em>*/is&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;&lt;strong&gt;$1&lt;/strong&gt;&#39;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #666666; font-style: italic;">// Replace all appereances of </em> and <em> with &lt;i&gt; and &lt;em&gt;</span>
  <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment<em>content&#39;</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #990000;">preg_replace</span><span style="color: #009900;">(</span> <span style="color: #0000ff;">&#39;/</em>(.</em>?)_/is&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;&lt;i&gt;$1&lt;/em&gt;&#39;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #009900;">)</span><span style="color: #339933;">;</span>
  <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #990000;">preg_replace</span><span style="color: #009900;">(</span> <span style="color: #0000ff;">&#39;/*(.<em>?)\</em>/is&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;&lt;em&gt;$1&lt;/em&gt;&#39;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #666666; font-style: italic;">// Replace all appereances of <code>with &amp;lt;code&amp;gt;&lt;/span&gt;
  &lt;span style=&quot;color: #000088;&quot;&gt;$comment&lt;/span&gt;&lt;span style=&quot;color: #009900;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;&#39;comment_content&#39;&lt;/span&gt;&lt;span style=&quot;color: #009900;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #339933;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #990000;&quot;&gt;preg_replace&lt;/span&gt;&lt;span style=&quot;color: #009900;&quot;&gt;(&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;&#39;/</code>(.*?)`/is&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;&lt;code&gt;$1&lt;/code&gt;&#39;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$comment</span><span style="color: #009900;">[</span><span style="color: #0000ff;">&#39;comment_content&#39;</span><span style="color: #009900;">]</span> <span style="color: #009900;">)</span><span style="color: #339933;">;&lt;/</span>code<span style="color: #339933;">&gt;</span>
&nbsp;
  <span style="color: #b1b100;">return</span> <span style="color: #000088;">$comment</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span></pre></div></div>

<p>You also need to add a filter to get the function working.</p>

<div class="wp_syntax"><div class="code"><pre class="php" style="font-family: monospace;">add_filter<span style="color: #009900;">(</span><span style="color: #0000ff;">&#39;preprocess_comment&#39;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&#39;my_preprocess_comment&#39;</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span></pre></div></div>

<p>This is everything that’s necessary to get the style-tags for all of your comments. It’s pretty easy and you may help people that want to comment without thinking about HTML and stuff.<br />
Even though if you think that it’s fine for users to use HTML if they want to style their comments and don’t want to add this function: Add this snipped anyway as it does not affect any existing functions in WordPress and the comment-section. It’s just an add-on.</p>





	<div class="share-post">
		<script type="text/x-handlebars-template" id="share-post">
			<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://drublic.de/blog/style-syntax-in-comments/" data-text="Add Style-Syntax in Comments with `, _ and *" data-count="horizontal" data-via="drublic" data-related="drublic">Tweet</a>

			<g:plusone size="medium"></g:plusone>
		</script>
	</div>
</article>
