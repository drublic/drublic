<article class="post">
	<header class="post-header">
		<h1><a href="http://drublic.de/blog/responsive-media/" title="Permalink to Responsive Media, Responsive Images in HTML5" rel="entry-title">Responsive Media, Responsive Images in HTML5</a></h1>
		<time datetime="Sat Nov 19 2011 01:00:00 GMT+0100 (CET)" rel="updated">Sat Nov 19 2011 01:00:00 GMT+0100 (CET)</time>

		<span class="author">
			by
			<a href="" title="Visit website" rel="author">Hans Christian</a>
		</span>

		<span class="categories">CSS, HTML5, Mobile, Research</span>
		<span class="tags">bandwidth, images, media, Mobile, performance, responsive, Responsive Design, Web-Apps</span>
	</header>

	<pre><code><div class="highlight"><pre>                        <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;message&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Hey</span> <span class="nx">there</span><span class="err">…</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">post</span> <span class="nx">is</span> <span class="mi">585</span> <span class="nx">days</span> <span class="nx">old</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">was</span> <span class="nx">written</span> <span class="nx">on</span> <span class="mf">19.11</span><span class="p">.</span><span class="mi">2011</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">careful</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">information</span> <span class="nx">provided</span> <span class="nx">and</span> <span class="nx">check</span> <span class="nx">a</span> <span class="nx">more</span> <span class="nx">recent</span> <span class="nx">source</span> <span class="nx">on</span> <span class="k">this</span> <span class="nx">topic</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>

    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">There</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">big</span> <span class="nx">discussion</span> <span class="nx">going</span> <span class="nx">on</span> <span class="nx">at</span> <span class="nx">the</span> <span class="nx">moment</span> <span class="nx">covering</span> <span class="nx">the</span> <span class="nx">actual</span> <span class="nx">point</span> <span class="nx">of</span> <span class="nx">how</span> <span class="nx">to</span> <span class="nx">deal</span> <span class="kd">with</span> <span class="nx">images</span> <span class="nx">and</span> <span class="nx">media</span> <span class="nx">et</span> <span class="nx">al</span><span class="p">.</span> <span class="nx">on</span> <span class="nx">mobile</span><span class="o">-</span><span class="nx">phones</span> <span class="nx">and</span> <span class="nx">other</span> <span class="nx">devices</span> <span class="nx">as</span> <span class="nx">there</span> <span class="nx">are</span> <span class="nx">some</span> <span class="nx">things</span> <span class="nx">that</span> <span class="nx">don</span><span class="err">’</span><span class="nx">t</span> <span class="nx">work</span> <span class="nx">as</span> <span class="nx">on</span> <span class="nx">a</span> <span class="nx">desktop</span> <span class="nx">computer</span><span class="o">:&lt;</span><span class="err">/p&gt;</span>
</pre></div>
</code></pre>
<p><ul></p>
<p><li>Bandwidth</li></p>
<p><li>Screen size</li></p>
<p><li>Performance / Velocity</li>
</ul></p>
<p>The question is how to deliver responsive images on a mobile website.</p>
<p>You maybe use something like <code>img { max-width: 100%; height: auto; }</code> in your responsive design to prevent images from being bigger then the screen of a mobile device.</p>
<p>In most of the cases this shrinks images in its displayed size, which is a&nbsp;processor intensive thing to do – especially when you are on a mobile device and don’t have endless processor capacity this hurts.<br />
The shrinking itself does not change the file-size that has to be loaded; it remains the same as on a desktop for example. As bandwidth is the bottleneck these days if you are on a mobile device, this is the issue where people want to see some improvement.</p>
<h2>What can we do about it?</h2>
<p>There are a couple of proposals and known techniques on how to solve the problem:</p>
<h3>1. Resize images with PHP</h3>
<p>This is something you could only do if you know the screen-size before you load the images them self. So you have to inject HTML through JavaScript for example and change the sources for images accordingly.</p>
<p>The <a href="http://adaptive-images.com/" target="_blank">Adaptive Images</a> framework a similar technique. Check out the <a title="Adaptive Images on GitHub" href="https://github.com/MattWilcox/Adaptive-Images" target="_blank">source on GitHub</a>.</p>
<h3>2. Request different images using data-attributes</h3>
<p>An article by Nicolas Gallagher covers this method using CSS to detect which source would be best to use.</p>
<p>The method could work like this: You have an image which has a really small file size and is served for every device at first (mobile first approche).</p>

<div class="wp_syntax"><div class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;img</span> <span style="color: #000066;">src</span>=<span style="color: #ff0000;">&quot;image.jpg&quot;</span> <span style="color: #000066;">alt</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">data-src-600px</span>=<span style="color: #ff0000;">&quot;image-600px.jpg&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></div></div>

<p>Now you are going to change the file if the screen is bigger by using the <code>content</code>-property of CSS and its <code>attr()</code> function.</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #a1a100;">@media (min-device-width:600px) {</span>
    img<span style="color: #00AA00;">[</span>data-src<span style="color: #933;">-600px</span><span style="color: #00AA00;">]</span> <span style="color: #00AA00;">{</span>
        <span style="color: #000000; font-weight: bold;">content</span><span style="color: #00AA00;">:</span> attr<span style="color: #00AA00;">(</span>data-src<span style="color: #933;">-600px</span><span style="color: #00AA00;">,</span> <span style="color: #993333;">url</span><span style="color: #00AA00;">)</span><span style="color: #00AA00;">;</span>
    <span style="color: #00AA00;">}</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p>Please have a look <a title="Responsive images using CSS3" href="http://nicolasgallagher.com/responsive-images-using-css3/" target="_blank">at the article</a> for detailed information.</p>
<p>An idea that goes beyond the replacement of images with the <code>attr()</code>-function is the usage of <code>content: url(myimage.jpg) replaced;</code>. This is something <a title="Tab Atkins' suggestion to use replaced content" href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0661.html" target="_blank">suggested</a> by Tab Atkins Jr. on the W3C www-styles mailing list – called replaced content.<br />
Something about <a title="Replaced Content in the CSS-specification" href="http://www.w3.org/TR/css3-content/#replacedContent" target="_blank">replaced content</a> appears in the CSS-spec but it does not look to be exactly what Tab is referring to.</p>
<h3>3. Introduce new attributes to the &lt;img&gt;-tag</h3>
<p><a title="Anselm's website" href="http://anselm.novolo.de/">Anselm Hannemann</a> <a title="Anselm's idea on the WHATWG's Mailing list" href="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-August/032977.html">shares the idea</a> of introducing a media-attribute that has some sort of “sizing-parameter”. It is supposed to be combined with the media-src-attribute which also has the sizing-parameter.<br />
The HTML could look something <a title="Gist by Anselm dealing with media- and media-src-attribute" href="https://gist.github.com/1158855" target="_blank">like this</a>:</p>

<div class="wp_syntax"><div class="code"><pre class="xml" style="font-family: monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;img</span> <span style="color: #000066;">src</span>=<span style="color: #ff0000;">&quot;myimage_xs.jpg&quot;</span></span>
<span style="color: #009900;"><span style="color: #000066;">media-xs</span>=<span style="color: #ff0000;">&quot;(min-device-width:320px and max-device-width:640px)&quot;</span> <span style="color: #000066;">media-src-xs</span>=<span style="color: #ff0000;">&quot;myimage_xs.jpg&quot;</span></span>
<span style="color: #009900;"><span style="color: #000066;">media-m</span>=<span style="color: #ff0000;">&quot;(min-device-width:640px and max-device-width:1024px)&quot;</span> <span style="color: #000066;">media-src-m</span>=<span style="color: #ff0000;">&quot;myimage_m.jpg&quot;</span></span>
<span style="color: #009900;"><span style="color: #000066;">media-xl</span>=<span style="color: #ff0000;">&quot;(min-device-width:1024px)&quot;</span> <span style="color: #000066;">media-src-xl</span>=<span style="color: #ff0000;">&quot;myimage_xsl.jpg&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></pre></div></div>

<p>As you can see the <code>media</code>-attributes contain media-queries which describe when to take a certain image-source.</p>
<h3>4. Using JavaScript</h3>
<p>There are some ideas on how to deal with this topic using JavaScript.</p>
<p>The FilamentGroup for example published its “Responsive Images”-project <a title="An Experiment with Mobile-First Images that Scale Responsively &amp; Responsibly" href="https://github.com/filamentgroup/Responsive-Images" target="_blank">on GitHub</a>. They are using “Mobile-First” to present a small-sized image on every device and replace this with JavaScript on window load.<br />
You can find out more about how it works <a title="_blank" href="http://filamentgroup.com/lab/responsive_images_experimenting_with_context_aware_image_sizing/">on their blog</a>. They also published <a title="Demo of Responsive Images" href="http://filamentgroup.com/examples/responsive-images/" target="_blank">a demo</a>.</p>
<p>Peter-Paul Koch <a title="Combining media queries and JavaScript" href="http://www.quirksmode.org/blog/archives/2010/08/combining_media.html" target="_blank">presented a possible way</a> on how to combine media queries with JavaScript. Which is not really new I think but a good summery.</p>
<p>Another approach could be a new attribute for the <code>script</code>-tag: Scott Jehl <a title="Scott Jehl's suggestion on responsive images: a `preparse`-attribute for the `script`-tag" href="https://twitter.com/#!/scottjehl/status/119836986101075968">suggested</a> to call it <code>preparse</code>. The script could then be used to replace sources in HTML fitting the current client-need.</p>
<p><img class="aligncenter" title="Bildschirmfoto 2011-11-16 um 00.04.34" src="http://drublic.de/blog/wp-content/uploads/2011/11/Bildschirmfoto-2011-11-16-um-00.04.34.png" alt="" width="654" height="263" /></p>
<h3>5. A new image-format containing different sizes</h3>
<p>People aso had the idea of creating an own image-format which contains for example four layers with different image sizes. The image then “decides” which format to take and serves this to the client without its three sibling-layers.</p>
<p>At the moment there is a format called <a title="MrSID on Wikipedia" href="http://en.wikipedia.org/wiki/MrSID" target="_blank">MrSID</a> developed by <a title="LizardTech on Wikipedia" href="http://en.wikipedia.org/wiki/LizardTech">LizardTech</a> which can have one or more compression rates.</p>
<p>Another approach is the <a title="JPEG 2000 on Wikipedia" href="http://en.wikipedia.org/wiki/JPEG_2000">JPEG 2000</a> file-format. It can carry out different optimization-levels for images. Read more about it on the Wikipedia-page I linked above.</p>
<h2>Media? But this was only about images…</h2>
<p>Yup, right! Images are just one aspect when it comes to responsive media.<br />
Videos for example are another thing. YouTube offers different video-sizes for watching. You have to choose manually which one to use. A possibility to select this resource automatically, build into the browser would be awesome!</p>
<p>JPEG 2000 has a video-equivalent developed by the same group of people as the JPEG-format called Motion JPEG 2000. Find more information about this <a href="http://www.jpeg.org/jpeg2000/j2kpart3.html" title="Motion JPEG 2000" target="_blank">here</a>.</p>
<h2>Conclusion</h2>
<p>As it turns out many developers are not aware of the problems that come up with a real responsive design – even HTML5-specification writer are <a title="Anne van Kersten calls responsive media 'a niche problem' on the W3C mailing-list" href="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-August/033029.html">calling it</a> “a niche problem”. This is why it is hard to develop a specification for a native API as for example Anselm Hannemann suggests.</p>
<p>But maybe the decision which technique might be best for solving the problem of serving responsive media has to be finished first before anything is spec’d up.</p>
<h2>Moar!</h2>
<p>Some more resources where the topic is discussed:</p>
<ul>
<li>A List Apart started the whole “Responsive Design”-discussion with <a href="http://www.alistapart.com/articles/responsive-web-design" title="Responsive Web Design" target="_blank">an article</a> by Ethan Marcotte</li>
<li><a href="https://groups.google.com/forum/#!topic/jquery-standards/rl8886ZRs8o" title="Responsive images discussed by the jQuery Standards Team - Google Group" target="_blank">jQuery Standards Team</a></li>
<li><a href="http://www.webmonkey.com/2011/08/speed-up-your-responsive-designs-with-adaptive-images/" title="Scott Gilbertson - Webmonkey - about responsive images">Scott Gilbertson on Webmonkey</a></li>
<li><a href="http://csswizardry.com/2011/07/responsive-images-right-now/" title="Responsive images right now" target="_blank">Another CSS-only idea</a> by Harry Roberts</li>
</ul>
<h3>Thanks!</h3>
<p>Thanks goes out to <a title="Anselm on Twitter" href="https://twitter.com/anselmhannemann" target="_blank">Anselm</a>, for reading what I wrote and helping me with some further information.</p>





	<div class="share-post">
		<script type="text/x-handlebars-template" id="share-post">
			<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://drublic.de/blog/responsive-media/" data-text="Responsive Media, Responsive Images in HTML5" data-count="horizontal" data-via="drublic" data-related="drublic">Tweet</a>

			<g:plusone size="medium"></g:plusone>
		</script>
	</div>
</article>
