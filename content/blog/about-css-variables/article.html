<article class="post">
	<header class="post-header">
		<h1><a href="http://drublic.de/blog/about-css-variables/" title="Permalink to About CSS Variables" rel="entry-title">About CSS Variables</a></h1>
		<time datetime="Sun Mar 18 2012 01:00:00 GMT+0100 (CET)" rel="updated">Sun Mar 18 2012 01:00:00 GMT+0100 (CET)</time>

		<span class="author">
			by
			<a href="" title="Visit website" rel="author">Hans Christian</a>
		</span>

		<span class="categories">CSS, CSS WDs, Research</span>
		<span class="tags">CSS, CSS3, Research, Specification, Working Draft</span>
	</header>

	<pre><code><div class="highlight"><pre>                        <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;message&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Hey</span> <span class="nx">there</span><span class="err">…</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">post</span> <span class="nx">is</span> <span class="mi">465</span> <span class="nx">days</span> <span class="nx">old</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">was</span> <span class="nx">written</span> <span class="nx">on</span> <span class="mf">18.03</span><span class="p">.</span><span class="mi">2012</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">careful</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">information</span> <span class="nx">provided</span> <span class="nx">and</span> <span class="nx">check</span> <span class="nx">a</span> <span class="nx">more</span> <span class="nx">recent</span> <span class="nx">source</span> <span class="nx">on</span> <span class="k">this</span> <span class="nx">topic</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>

    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">read</span> <span class="nx">about</span> <span class="nx">the</span> <span class="nx">updated</span> <span class="nx">syntax</span> <span class="nx">of</span> <span class="nx">CSS</span> <span class="nx">variables</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;#update&quot;</span><span class="o">&gt;</span><span class="nx">the</span> <span class="nx">first</span><span class="o">&lt;</span><span class="err">/a&gt; and &lt;a href=&quot;#update2&quot;&gt;second update&lt;/a&gt; of this post.&lt;/strong&gt;&lt;/p&gt;</span>
</pre></div>
</code></pre>
<p>Since a little bit more than a month (as of the time of writing) there is a <a title="CSS Variables Module Level 1" href="http://dev.w3.org/csswg/css-variables/">Editor’s Draft for a CSS Variables Module</a> by Google (<a href="http://www.xanthir.com/blog/">Tab Atkins</a> and Luke Macpherson) and <a href="http://glazman.org/weblog/">Daniel Glazman</a>. Just a few days ago the Working Draft was updated.<br />
The <a href="http://disruptive-innovations.com/zoo/cssvariables/">first draft was written in 2008</a> by Daniel Glazman but was not added to the official specification. The new <abbr title="Working Draft">WD</abbr> extends this proposal by Glazman.</p>
<p><strong>Disclaimer:</strong> This article is part of a <a href="http://drublic.de/blog/category/css-wds/" title="A series of posts which describes new CSS specifications, working drafts and editor’s drafts.">small series</a> about the latest CSS working drafts. The first article in this series was about the <a title="About The CSS Hierarchies Module Level 3" href="http://drublic.de/blog/the-css-hierarchies-module-level-3/">CSS Hierarchies Module</a>.</p>
<h2>CSS Variables</h2>
<p>The CSS Variables Module Level 1 suggests to use variables for data that is reused in stylesheets. These key-value storages provide the possibility to store “meaningless” data as you can do in HTML: Variable keys consist of a <code>data-</code>-prefix and the variable name.</p>
<blockquote><p>Any property name starting with the prefix “data-” is a data property. Data properties are defined to be valid but meaningless as they are meant solely for allowing authors to pass custom data around their page, similar to the custom data attributes in HTML.<br />
<cite>~&nbsp;<a href="http://dev.w3.org/csswg/css-variables/#defining-variables">Defining Variables With Data Properties</a> – CSS Variables Editor’s Draft</cite>
</p></blockquote>
<p>Using <code>data-</code> as a prefix for variables is <a href="https://twitter.com/#!/tabatkins/status/170547807445467136">still in discussion</a> and may likely be changed to something more “connected” to variables (<code>$</code> or <code>&amp;</code>).</p>
<p><strong>Edit:</strong> The mailing-list www-style <a href="http://lists.w3.org/Archives/Public/www-style/2012Feb/1028.html">is discussing</a> the use of <code>data</code> and Ian Muir wrote <a href="http://www.piehead.com/blog/2012/03/a-vote-for-css-variables">an article</a> about the problem.</p>
<h3>Syntax</h3>
<p>Variables are defined by mapping them to the <code>:root</code> pseudo-class. The WD does not really explain why the variables must be declared on the root-element. Maybe it’s because the data needs to be bound to an element to not “fly around” in the global scope (which does not really exist in CSS).<br />
Defined variables can also be set on every other element and overwrite the existing value of a variable.<br />
So this is how you set variables.</p>
<p>To get a specific variable, you do not declare the variable-name but you call <code>data</code> as a function on a certain property with the variables name (without <code>data-</code>-prefix) as an argument.</p>
<h3>An Example</h3>
<p>So here is an example:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #808080; font-style: italic;">/<em> Set data </em>/</span>
<span style="color: #3333ff;">:root </span><span style="color: #00AA00;">{</span>
  data-main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #cc00cc;">#bada55</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/<em> Get data </em>/</span>
<span style="color: #6666ff;">.foobar</span> <span style="color: #00AA00;">{</span>
  <span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> data<span style="color: #00AA00;">(</span>main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">)</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p>As said before, variables can be overwritten for specific elements. So we can add the declaration of the variable to <code>.foobar</code>:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #6666ff;">.foobar</span> <span style="color: #00AA00;">{</span>
  data-main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #cc00cc;">#fe57a1</span><span style="color: #00AA00;">;</span>
  <span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> data<span style="color: #00AA00;">(</span>main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">)</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p>The color of <code>.foobar</code> is now <code>#fes7a1</code> and not <code>#bada55</code>.</p>
<h2>Real World Examples</h2>
<p>Well, as this is an Editor’s Draft and pretty new it’s not being implemented in any browser.</p>
<p>I’ve created <a href="http://dabblet.com/gist/2072596" title="A CSS variables test">a test case on dabblet</a> with vendor prefixes which tests the two examples above. I’ve run this test on the major browser alphas and nightlies.</p>
<p>Even though variables are not natively supported by CSS in any browser yet, we can use a very similar approach: All CSS preprocessors support variables. Here is an example with SASS:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #808080; font-style: italic;">/<em> Setting a variable </em>/</span>
$main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #cc00cc;">#bada55</span><span style="color: #00AA00;">;</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/<em> Get the variable&#39;s value </em>/</span>
<span style="color: #6666ff;">.foobar</span> <span style="color: #00AA00;">{</span>
  <span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> $main-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p><h2>Conclusion</h2></p>
<p>We can use variables with preprocessors today which is pretty rad. As with <a href="http://drublic.de/blog/the-css-hierarchies-module-level-3/">the CSS Hierarchies Module</a> CSS in the future may support ideas that come from implementations in preprocessors somehow.<br />
I think most developers are happy about these adoptions and will likely use it. But as it will take some time for all vendors to implement this feature – and <a href="http://paulirish.com/2011/browser-market-pollution-iex-is-the-new-ie6/" title="Paul Irish about problems with oldIE">even more time until browsers that don’t support such new features vanish</a> – we will have to use preprocessors to get variables in our CSS working.</p>
<hr />
<h2 id="update2">Update <small>19.08.2012</small></h2>
<p>Since I wrote the last update the Editors Draft changed: The <code>var()</code>-function <a href="http://dev.w3.org/csswg/css-variables/#var-glyph">changed to use the var-glyph <code>$</code></a> as it is known from SASS (described above).</p>
<p>It is now possible to call variables like this:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;">h1 <span style="color: #00AA00;">{</span>
  <span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> $some-<span style="color: #000000; font-weight: bold;">color</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p>While it still needs to be defined with the <code>var</code> prefix:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #3333ff;">:root </span><span style="color: #00AA00;">{</span>
  var-some-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #cc00cc;">#aaa</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p>As Tab Atkins <a href="http://www.xanthir.com/blog/b4KT0">describes in his blog</a> this is going to change back to the old syntax I wrote about in the first place as this causes problems with further implementations of CSS (like variables for selectors and the <a href="http://drublic.de/blog/the-css-hierarchies-module-level-3/">hierarchy model</a>).</p>
<hr />
<h2 id="update">Update <small>16.04.2012</small></h2>
<p>Since last week the CSS Variables Module Level 1 is an <a href="http://www.w3.org/TR/css-variables/">actual Working Draft of the W3C</a>.</p>
<p>It’s now possible to define variables with the <code>var</code>-prefix instead of <code>data</code> which is still pretty complicated. I wonder why they not adept an existing concept as in LESS or SASS.</p>
<p>Thus the <code>data()</code>-function changed accordingly to <code>var()</code>.</p>
<p>Furthermore it’s possible to set variables on a certain element but use them in a more complex definition. An example might be the usage as follows (while elements with class <code>important</code> and <code>primary</code> are <code>div</code>s):</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #6666ff;">.important</span> <span style="color: #00AA00;">{</span> var-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #993333;">red</span><span style="color: #00AA00;">;</span> <span style="color: #00AA00;">}</span>
<span style="color: #6666ff;">.primary</span> <span style="color: #00AA00;">{</span> var-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #000000; font-weight: bold;">blue</span><span style="color: #00AA00;">;</span> <span style="color: #00AA00;">}</span>
div <span style="color: #00AA00;">{</span> <span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> var<span style="color: #00AA00;">(</span><span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">)</span><span style="color: #00AA00;">;</span> <span style="color: #00AA00;">}</span></pre></div></div>

<p>Also nestings for variables are possible:</p>

<div class="wp_syntax"><div class="code"><pre class="css" style="font-family: monospace;"><span style="color: #3333ff;">:root </span><span style="color: #00AA00;">{</span>
  var-<span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">:</span> <span style="color: #cc00cc;">#ddd</span><span style="color: #00AA00;">;</span>
  var-<span style="color: #000000; font-weight: bold;">border</span><span style="color: #00AA00;">:</span> <span style="color: #933;">1px</span> <span style="color: #993333;">solid</span> var<span style="color: #00AA00;">(</span><span style="color: #000000; font-weight: bold;">color</span><span style="color: #00AA00;">)</span><span style="color: #00AA00;">;</span>
<span style="color: #00AA00;">}</span></pre></div></div>

<p><h3>The bright and shiny future</h3></p>
<p>As I think there still are some issues with this Working Draft I like the fast step forward in making this a WD in only a view weeks.<br />
So sooner or later variables will be part of the CSS specification and will be implemented in browsers. I hope this will be very soon.</p>





	<div class="share-post">
		<script type="text/x-handlebars-template" id="share-post">
			<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://drublic.de/blog/about-css-variables/" data-text="About CSS Variables" data-count="horizontal" data-via="drublic" data-related="drublic">Tweet</a>

			<g:plusone size="medium"></g:plusone>
		</script>
	</div>
</article>
